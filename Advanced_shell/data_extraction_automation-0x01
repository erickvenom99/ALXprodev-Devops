#!/bin/bash

# Define the input file created in Task 0
INPUT_FILE="data.json"

# --- The jq | sed | awk Pipeline ---
cat "$INPUT_FILE" | \
  jq -r '"\(.name) \(.types[0].type.name) \(.weight) \(.height)"' | \
  sed 's/^\([a-z]\)/\U\1/' | \
  awk '
   {
        # --- Assign Positional Fields to Descriptive Variables ---
        name = $1;
        raw_type = $2;
        raw_weight = $3;
        raw_height = $4;
        
        # --- Calculations and Formatting ---
        
        # Convert hectograms (hg) to kilograms (kg)
        formatted_weight = raw_weight / 10;
        
        # Convert decimeters (dm) to meters (m)
        formatted_height = raw_height / 10;
        
        # Capitalize the first letter of the type (e.g., 'grass' -> 'Grass')
        type_case = toupper(substr(raw_type, 1, 1)) substr(raw_type, 2);
        
        # --- Print the Human-Readable Output ---
        # Using %g for weight (gets rid of .0) and %.1f for height
        printf("%s is of type %s, weighs %gkg, and is %.1fm tall.\n", 
            name, 
            type_case, 
            formatted_weight, 
            formatted_height);
    }'
